<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Arrow Combo Test</title>
  <style>
    .selectionbtn {
      display: inline-block;
      width: 22px;
      height: 22px;
      background: #ccc;
      border: 1px solid #888;
      text-align: center;
      cursor: pointer;
      vertical-align: top;
    }
    .dropdown {
      position: absolute;
      top: 40px;
      left: 10px;
      border: 1px solid #888;
      background: #fff;
      display: none;
      min-width: 100px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      z-index: 1000;
    }
    .dropdown div {
      padding: 5px 10px;
      cursor: pointer;
    }
    .dropdown div:hover {
      background: #eee;
    }
    .combo-container {
      position: relative;
      display: inline-block;
      margin: 10px;
    }
  </style>
</head>
<body>
  <h3>Arrow Combo Test</h3>

  <div id="combos"></div>

  <script>
    const combosContainer = document.getElementById("combos");

    function createCombo(id) {
      const wrapper = document.createElement("div");
      wrapper.className = "combo-container";

      const input = document.createElement("input");
      input.id = "comboInput" + id;
      input.type = "text";
      input.readOnly = true;
      input.className = "text";
      input.placeholder = "Pick option";
      input.style.width = "100px";

      const btn = document.createElement("a");
      btn.href = "javascript:";
      btn.className = "selectionbtn";
      btn.textContent = "â–¼";

      const menu = document.createElement("div");
      menu.className = "dropdown";
      menu.id = "comboMenu" + id;
      ["Option A", "Option B", "Option C"].forEach(opt => {
        const div = document.createElement("div");
        div.dataset.val = opt;
        div.textContent = opt;
        menu.appendChild(div);
      });

      wrapper.appendChild(input);
      wrapper.appendChild(btn);
      wrapper.appendChild(menu);

      // Toggle menu on arrow click
      btn.addEventListener("click", () => {
        menu.style.display = menu.style.display === "block" ? "none" : "block";
      });

      // When an option is clicked, fill input and close menu
      menu.addEventListener("click", e => {
        if (e.target.dataset.val) {
          input.value = e.target.dataset.val;
          menu.style.display = "none";
          input.dispatchEvent(new Event("input", {bubbles:true}));
          input.dispatchEvent(new Event("change", {bubbles:true}));
        }
      });

      // Click outside closes menu
      document.addEventListener("click", e => {
        if (!menu.contains(e.target) && e.target !== btn) {
          menu.style.display = "none";
        }
      });

      return wrapper;
    }

    // Create 21 combos (1 original + 20 more)
    for (let i = 0; i < 21; i++) {
      combosContainer.appendChild(createCombo(i));
    }
  </script>
</body>
</html>
